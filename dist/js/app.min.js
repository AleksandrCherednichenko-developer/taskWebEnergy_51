(()=>{"use strict";function e(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}e((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));const t=function(e){if(0==e.value&&(e.value=""),e.value.length>0){let t=e.value.split(/[- — /]/).join("").match(/.{1,1}/g);0==t[0]&&2==t.length&&t.shift();let s=t.filter((function(e){return e.match(/^[1-9]|[0-9]|[0-9]$/g)}));t[t.length-1].match(/[0-9]/)||(t.length=t.length-1,e.value=t.join("")),e.value=s.join("")}};document.addEventListener("DOMContentLoaded",(()=>{let e=document.querySelector("body"),s=document.querySelector(".background"),o=document.querySelector(".categories .categories__more"),i=document.querySelector(".categories .show__more"),a=document.querySelector(".filter__inner"),l=(a.querySelector(".filter"),a.querySelector(".price__input-from input")),c=a.querySelector(".price__input-to input"),n=a.querySelector(".filter__close-btn"),r=document.querySelector(".popup"),d=document.querySelector(".close__popup");!function(){let e,s=$(".js-range-slider"),o=1e5,i=0,a=1e5;function n(e){i=e.from,a=e.to,l.setAttribute("data-value",i),c.setAttribute("data-value",a),l.value=i,c.value=a}s.ionRangeSlider({skin:"round",type:"double",min:0,max:o,from:i,to:a,step:1e3,hide_min_max:!0,hide_from_to:!0,onStart:n,onFinish:n,onChange:n}),e=s.data("ionRangeSlider"),l.addEventListener("input",(()=>{l.setAttribute("data-value",l.value);let s=l.getAttribute("data-value");s<0?s=0:s>a&&(s=a),""==s?e.update({from:o}):e.update({from:s}),t(l)})),c.addEventListener("input",(()=>{c.setAttribute("data-value",c.value);let s=c.getAttribute("data-value");s<i?s=i:s>o&&(s=o),""==s?e.update({to:0}):e.update({to:s}),t(c)}))}(),document.addEventListener("click",(t=>{let l=t.target;l.closest(".sorting__filter-btn")&&(e.classList.add("lock"),s.classList.add("fixed"),a.classList.add("fixed")),l.closest(".title__block")&&("BUTTON"===l.tagName&&l.closest(".categories")&&l!==i&&l.classList.toggle("active"),l===i&&(o.classList.contains("hide")?(o.classList.remove("hide"),i.textContent="Свернуть"):(o.classList.add("hide"),i.textContent="Показать еще"))),l.closest(".filter__inner")&&(l.closest(".filter__block-header")&&l.closest(".filter__block").classList.toggle("active"),l===n&&(e.classList.remove("lock"),s.classList.remove("fixed"),a.classList.remove("fixed"))),l.closest(".products-block")&&"BUTTON"===l.tagName&&l.closest(".item")&&(t.preventDefault(),l.closest(".add__basket")&&!r.classList.contains("fixed")&&(s.classList.add("fixed"),r.classList.add("fixed"),e.classList.add("lock"))),l===d&&r.classList.contains("fixed")&&(e.classList.remove("lock"),s.classList.remove("fixed"),r.classList.remove("fixed"))}))})),e()})();